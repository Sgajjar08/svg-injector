/**
 * SVGInjector v1.1.4 - Fast, caching, dynamic inline SVG DOM injection library
 * https://github.com/iconic/SVGInjector
 *
 * Copyright (c) 2014-2015 Waybury <hello@waybury.com>
 * @license MIT
 */
!function(t,e){"use strict";function r(t){t=t.split(" ");for(var e={},r=t.length,n=[];r--;)e.hasOwnProperty(t[r])||(e[t[r]]=1,n.unshift(t[r]));return n.join(" ")}var n="file:"===t.location.protocol,i=e.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),o="http://www.w3.org/1999/xlink",a=Array.prototype.forEach||function(t,e){if(void 0===this||null===this||"function"!=typeof t)throw new TypeError;var r,n=this.length>>>0;for(r=0;r<n;++r)r in this&&t.call(e,this[r],r,this)},l={},s=0,u=[],c=[],f={},p=function(t){return t.cloneNode(!0)},d=function(t,e){c[t]=c[t]||[],c[t].push(e)},h=function(t){for(var e=0,r=c[t].length;e<r;e++)!function(e){setTimeout(function(){c[t][e](p(l[t]))},0)}(e)},v=function(e,r){if(void 0!==l[e])l[e]instanceof SVGSVGElement?r(p(l[e])):d(e,r);else{if(!t.XMLHttpRequest)return r("Browser does not support XMLHttpRequest"),!1;l[e]={},d(e,r);var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(404===i.status||null===i.responseXML)return r("Unable to load SVG file: "+e),n&&r("Note: SVG injection ajax calls do not work locally without adjusting security setting in your browser. Or consider using a local webserver."),r(),!1;if(!(200===i.status||n&&0===i.status))return r("There was a problem injecting the SVG: "+i.status+" "+i.statusText),!1;if(i.responseXML instanceof Document)l[e]=i.responseXML.documentElement;else if(DOMParser&&DOMParser instanceof Function){var t;try{var o=new DOMParser;t=o.parseFromString(i.responseText,"text/xml")}catch(e){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)return r("Unable to parse SVG file: "+e),!1;l[e]=t.documentElement}h(e)}},i.open("GET",e),i.overrideMimeType&&i.overrideMimeType("text/xml"),i.send()}},g=function(e,n,l,c){var p=e.getAttribute("data-src")||e.getAttribute("src");if(!/\.svg/i.test(p))return void c("Attempted to inject a file with a non-svg extension: "+p);if(!i){var d=e.getAttribute("data-fallback")||e.getAttribute("data-png");return void(d?(e.setAttribute("src",d),c(null)):l?(e.setAttribute("src",l+"/"+p.split("/").pop().replace(".svg",".png")),c(null)):c("This browser does not support SVG and no PNG fallback was defined."))}-1===u.indexOf(e)&&(u.push(e),e.setAttribute("src",""),v(p,function(i){if(void 0===i||"string"==typeof i)return c(i),!1;var l=e.getAttribute("id");l&&i.setAttribute("id",l);var d=e.getAttribute("title");d&&i.setAttribute("title",d);var h=[].concat(i.getAttribute("class")||[],"injected-svg",e.getAttribute("class")||[]).join(" ");i.setAttribute("class",r(h));var v=e.getAttribute("style");v&&i.setAttribute("style",v);var g=[].filter.call(e.attributes,function(t){return/^data-\w[\w\-]*$/.test(t.name)});a.call(g,function(t){t.name&&t.value&&i.setAttribute(t.name,t.value)});var m,b,w,y,A,x={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(x).forEach(function(t){m=t,w=x[t],b=i.querySelectorAll("defs "+m+"[id]");for(var e=0,r=b.length;e<r;e++){y=b[e].id,A=y+"-"+s;var n;a.call(w,function(t){n=i.querySelectorAll("["+t+'*="'+y+'"]');for(var e=0,r=n.length;e<r;e++)n[e].setAttribute(t,"url(#"+A+")")});for(var l=i.querySelectorAll("[*|href]"),u=[],c=0,f=l.length;c<f;c++)l[c].getAttributeNS(o,"href").toString()==="#"+b[e].id&&u.push(l[c]);for(var p=0,d=u.length;p<d;p++)u[p].setAttributeNS(o,"href","#"+A);b[e].id=A}}),i.removeAttribute("xmlns:a");for(var S,k,j=i.querySelectorAll("script"),G=[],T=0,M=j.length;T<M;T++)(k=j[T].getAttribute("type"))&&"application/ecmascript"!==k&&"application/javascript"!==k||(S=j[T].innerText||j[T].textContent,G.push(S),i.removeChild(j[T]));if(G.length>0&&("always"===n||"once"===n&&!f[p])){for(var V=0,q=G.length;V<q;V++)new Function(G[V])(t);f[p]=!0}var E=i.querySelectorAll("style");a.call(E,function(t){t.textContent+=""}),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink",o),e.parentNode.replaceChild(i,e),delete u[u.indexOf(e)],e=null,s++,c(i)}))},m=function(t,e,r){e=e||{};var n=e.evalScripts||"always",i=e.pngFallback||!1,o=e.each;if(void 0!==t.length){var l=0;a.call(t,function(e){g(e,n,i,function(e){o&&"function"==typeof o&&o(e),r&&t.length===++l&&r(l)})})}else t?g(t,n,i,function(e){o&&"function"==typeof o&&o(e),r&&r(1),t=null}):r&&r(0)};"object"==typeof module&&"object"==typeof module.exports?module.exports=exports=m:"function"==typeof define&&define.amd?define(function(){return m}):"object"==typeof t&&(t.SVGInjector=m)}(window,document);
//# sourceMappingURL=svg-injector.map.js